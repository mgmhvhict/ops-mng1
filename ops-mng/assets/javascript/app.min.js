var Main=function(){function e(e,t,r,o){void 0!==o&&o&&n(e,t,r),e.addEventListener?e.addEventListener(t,r):e.attachEvent&&e.attachEvent(t,r)}function n(e,n,t){e.removeEventListener?e.removeEventListener(n,t):e.detachEvent&&e.detachEvent(n,t)}function t(e,n){return void 0===n&&(n=document),n.getElementById(e)}function r(e,n){return void 0===n&&(n=document),n.getElementsByTagName(e)}function o(e,n){return e.getAttribute?e.getAttribute(n):e.getAttributeNode?e.getAttributeNode(n):null}function a(e,n){e.removeAttribute?e.removeAttribute(n):e.removeAttributeNode&&e.removeAttributeNode(n)}function l(e,n,t,r){e.setAttribute?e.setAttribute(n,t):e.setAttributeNode&&e.setAttributeNode(n,t)}function i(e,n,t,r){if(null!=e&&void 0!==e)for(var o=0;o<e.length;++o){var a=e[o];a.nodeName.toLowerCase()===n&&(l(a,t,r),i(a.childNodes,n,t,r))}}var u="click",s="keydown",c="submit",d=function(){function n(e){for(var n=[],t=0;t<e.length;++t){var r=e[t];if("function"==typeof r){var o=r();void 0!==o&&0==o&&n.push(t)}}if(!(n.length<=0))for(t=n.length-1;t>=0;--t)e.splice(n[t],1)}var t=[],r=[];return{run:function(){e(window,"load",d.reOnload,!0)},addOnload:function(e){t.push(e)},addInvoke:function(e){r.push(e)},reOnload:function(){n(t)},reInvoke:function(){n(r)}}}(),f=function(){var e=null,n=null,r=0,o=0,a=0;return{init:function(){null==e&&(e=t("progress-bar-body"))},updateCurrent:function(e){o=e},getCurrent:function(){return o},updateTime:function(e){a=e},getTime:function(){return a},updateCount:function(e){r=e},getCount:function(){return r},reDisplay:function(){f.init(),null!=n&&clearInterval(n,null),"none"===e.style.display&&(e.style.width="0%"),e.style.display="block",n=setInterval(function(){r>=o||r>=100?(clearInterval(n),r>=100&&(e.style.display="none")):(r+=1,e.style.width=r+"%")},a)}}}(),h=function(){function e(e){return!!e.url&&(e.before||(e.before=function(e){}),e.end||(e.end=function(e){}),e.success||(e.success=function(e,n){}),e.error||(e.error=function(e){}),e.progress||(e.progress=function(e,n){}),e.uploadProgress||(e.uploadProgress=function(e,n){}),e.loadstart||(e.loadstart=function(e,n){}),e.loadend||(e.loadend=function(e,n){}),e.method||(e.method="GET"),!0)}function n(e,n){var t=!1;return n.onreadystatechange=function(e){t=!0},n.onloadstart=function(t){e.loadstart(t,n)},n.onprogress=function(t){e.progress(t,n)},n.upload.onprogress=function(t){e.uploadProgress(t,n)},n.onloadend=function(r){t&&(4==n.readyState&&200==n.status?e.success(n.responseText,n):e.error(n)),e.loadend(r,n),e.end(n)},e.before(n),n}function t(e,n){if("POST"===e.method){var t=new FormData;if(e.datas)for(var o in e.datas)t.append(o,e.datas[o]);else if(e.dataFormElement){var a=[],l=r("input",e.dataFormElement),i=r("textarea",e.dataFormElement),u=r("select",e.dataFormElement);if(l.length&&l.length>0)for(s=0;s<l.length;++s)a.push(l[s]);if(i.length&&i.length>0)for(s=0;s<i.length;++s)a.push(i[s]);if(u.length&&u.length>0)for(s=0;s<u.length;++s)a.push(u[s]);if(a.length&&a.length>0)for(var s=0;s<a.length;++s){var c=a[s],d=null,f=null,h=null,v=null;if(c.name&&c.name.length>0&&(d=c.name),c.type&&c.type.length>0&&(h=c.type),c.value&&c.value.length>0&&(f=c.value),c.tagName&&(v=c.tagName.toLowerCase()),null!=d&&null!=v)if((null==f||f.length&&f.length<=0)&&(f=""),"textarea"===v||"select"===v)t.append(d,f);else if("checkbox"===h||"radio"===h)c.checked&&t.append(d,f);else if("file"===h){var p=c.files;if(p.length&&p.length>0)for(var g=0;g<p.length;++g)t.append(c.name,p[g])}else t.append(d,f)}}return e.submitElement&&e.submitElement.type&&"submit"===e.submitElement.type&&(f=null,e.submitElement.name&&(e.submitElement.value?f=e.submitElement.value:e.submitElement.tagName.toLowerCase&&"button"===e.submitElement.tagName.toLowerCase()&&(f=e.submitElement.innerHTML),t.append(e.submitElement.name,f))),t}return null}return{open:function(r){var o=h.createXHR(),a=null;e(r)&&(o=n(r,o),a=t(r),o.open(r.method,r.url,!0),o.send(a))},createXHR:function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}}}(),v=function(){function t(){var e=window.location.href;if(null!==e&&e.length>0){var n=e.lastIndexOf("#"),t=null;-1!==n?(t=e.substring(n+1),u(),c(t,!0)):eelements.length&&eelements.length>0&&(u(),s(d[0]))}}function i(){var e=this;if(e.form&&void 0!==e.form){var n=o(e,"action"),t=window.location.href,r=e.name;if(null!==n&&n.length>0){var a=n.lastIndexOf("#");-1!==a&&(n=n.substring(0,a))}if(null!==t&&t.length>0){var l=t.lastIndexOf("#");-1!==l&&(t=t.substring(0,l))}void 0!==r&&null!==r&&(r=e.tagName.toLowerCase()+"_"+r),e.form.action=n+"#"+r,window.location.href=n+"#"+r,u(),s(e)}}function u(){if(!(void 0===d&&d.length<=0))for(var e=0;e<d.length;++e)a(d[e],"autofocus")}function s(e,n){if(l(e,"autofocus"),e.focus(),n){var t=document.documentElement||document.body,r=window.pageYOffset||t.scrollTop,o=e.offsetTop+e.form.offsetTop;r>o&&(t.scrollTop=o)}}function c(e,n){if(!(void 0===d&&d.length<=0))for(var t=0;t<d.length;++t){var r=d[t],o=r.name;(o=void 0!==o&&null!==o?r.tagName.toLowerCase()+"_"+o:r.tagName.toLowerCase())===e&&s(r,n)}}var d=[];return{onload:function(){if(d.length&&d.length>0){for(s=0;s<d.length;++s)n(d[s],"focus",i);d=[]}var o=r("input"),a=r("textarea");if(void 0!==o&&o.length>0)for(s=0;s<o.length;++s){var l=o[s];if(l.type){var u=l.type;"text"!==u&&"password"!==u&&"number"!==u||(d.push(l),e(l,"focus",i,!0))}}if(void 0!==a&&a.length>0)for(var s=0;s<a.length;++s)d.push(a[s]),e(a[s],"focus",!0);t()}}}(),p=function(){function n(){null!==a&&void 0!==a&&a.click&&a.click()}function r(e){return!e.which||e.which!==c||!e.ctrlKey||1!=e.ctrlKey||(i=!0,e.preventDefault(),!1)}function o(e){return e.which&&e.which==u&&(l=!1,1==i)?(i=!1,n(),e.preventDefault(),!0):(e.preventDefault(),!1)}var a=null,l=!0,i=!1,u=17,c=83;return{onload:function(){null!==(a=t("button-save-on-javascript"))&&void 0!==a&&void 0!==a.click&&(e(window,s,r,!0),e(window,"keyup",o,!0))}}}(),g=function(){function e(){0!=o()&&(i.innerHTML=u>0?"("+u+")":null)}function n(){if(0!=o()){s=0,u=0;for(var e=0;e<a.elements.length;++e){var n=a.elements[e];n.type&&"checkbox"===n.type&&n!==l&&(n.checked&&u++,s++)}}}function r(){0!=o()&&(u<=0?l.checked=!1:u>=s&&(l.checked=!0))}function o(){return void 0!==a&&void 0!==l&&void 0!==i&&null!==a&&null!==l&&null!==i}var a=null,l=null,i=null,u=0,s=0;return{init:function(u,s,c){a=t(u),l=t(s),i=t(c),0!=o()&&(n(),e(),r())},onCheckAll:function(){if(0!=o()){for(var t=1==l.checked,i=0;i<a.elements.length;++i){var u=a.elements[i];u.type&&"checkbox"===u.type&&u!==l&&(u.checked=t)}n(),e(),r()}},onCheckItem:function(a){var l=t(a);void 0!==l&&null!==l&&0!=o()&&(l.type&&"checkbox"===l.type&&(l.cheked=1==l.checked),n(),e(),r())}}}(),m=function(){function n(){var e={system:0,group:0,user:0};if(void 0===l)return e;var n=l.value;(null==n||n.length<=0)&&(n=""),n.length<1?n+="000":n.length<2?n+="00":n.length<3&&(n+="0");var t=n.length;return t>=3&&(e.system=parseInt(n.charAt(t-3))),t>=2&&(e.group=parseInt(n.charAt(t-2))),t>=1&&(e.user=parseInt(n.charAt(t-1))),(e.system<0||e.system>7)&&(e.system=0),(e.group<0||e.group>7)&&(e.group=0),(e.user<0||e.user>7)&&(e.user=0),e}function o(){if(void 0!==u){for(var e=0,n=0,t=0,r=0;r<u.length;++r){var o=u[r];if(1==o.checked&&o.name&&o.name.search){var a=o.name;-1!=a.search("system")?-1!=a.search("read")?e+=4:-1!=a.search("write")?e+=2:-1!=a.search("execute")&&(e+=1):-1!=a.search("group")?-1!=a.search("read")?n+=4:-1!=a.search("write")?n+=2:-1!=a.search("execute")&&(n+=1):-1!=a.search("user")&&(-1!=a.search("read")?t+=4:-1!=a.search("write")?t+=2:-1!=a.search("execute")&&(t+=1))}}return e=e.toString?e.toString():"0",n=n.toString?n.toString():"0",t=t.toString?t.toString():"0",e+n+t}}function a(e,n,t){if(void 0!==u)for(var r=0;r<u.length;++r){var o=u[r];if(o.name&&o.name.search){var a=o.name;-1!=a.search("system")?-1!=a.search("read")?o.checked=0!=(4&e):-1!=a.search("write")?o.checked=0!=(2&e):-1!=a.search("execute")?o.checked=0!=(1&e):o.checked=!1:-1!=a.search("group")?-1!=a.search("read")?o.checked=0!=(4&n):-1!=a.search("write")?o.checked=0!=(2&n):-1!=a.search("execute")?o.checked=0!=(1&n):o.checked=!1:-1!=a.search("user")&&(-1!=a.search("read")?o.checked=0!=(4&t):-1!=a.search("write")?o.checked=0!=(2&t):-1!=a.search("execute")?o.checked=0!=(1&t):o.checked=!1)}}}var l=null,i=null,u=null;return{init:function(s,c){if(l=t(s),i=t(c),u=[],null!=l&&null!=i&&void 0!==l&&void 0!==i){e(l,"input",function(e){var t=n();void 0!==t&&a(t.system,t.group,t.user)},!0);var d=r("input",i);if(d.length){for(var f=0;f<d.length;++f){var h=d[f];h.type&&"checkbox"==h.type&&(e(h,"click",function(e){var t=o();void 0!==t&&(l.value=t),void 0!==(t=n())&&a(t.system,t.group,t.user)},!0),u.push(h))}var v=n();void 0!==v&&a(v.system,v.group,v.user)}}}}}(),y=function(){function e(e){if(void 0!==e.target.nextElementSibling){var n=e.target.nextElementSibling,t=r("span",n),o=e.target.value,a=e.target.files;if(a&&a.length&&a.length>1)for(var l=1;l<a.length;++l)o+=", "+a[l].name;"undefined"!==t&&t.length>=1?t[0].innerHTML=o:n.innerHTML=o}}return{onload:function(){var n=r("input");if(void 0!==n&&n.length>0)for(var t=0;t<n.length;++t){var o=n[t];o.type&&"file"===o.type.toLowerCase()&&(o.onchange=e)}},onAddMore:function(e,n,u){var s=t(e),c=s.cloneNode(!0),d=s.parentElement,f=(s.className,d.childNodes),h=f.length,v=o(s,"name"),p=0;if(null!=v&&void 0!==v){v.value&&(v=v.value),null!=v&&0===v.indexOf(n,0)?(p=v.substring(n.length),p=parseInt(p)):p=0;for(var g=r("input",c),m=r("label",c),b=0;b<g.length;++b){var w=g[b],k=document.createElement("input");l(k,"type",o(w,"type")),l(k,"name",o(w,"name")),l(k,"id",o(w,"id")),c.replaceChild(k,w)}for(b=0;b<m.length;++b){var x=m[b],C=r("span",x);if(null!=C&&void 0!==C&&C.length>=1){var E=C[0].attributes,L=E.lng,O=E.value,T=null;L.value&&null!=L.value?T=L.value:O.value&&null!=O.value&&(T=O.value),C[0].innerHTML=T}else"string"!=typeof u&&(u=null),x.innerHTML=u}var N=n+(p+1);l(c,"name",N),i(c.childNodes,"input","id",N),i(c.childNodes,"label","for",N)}for(a(s,"id"),b=h-1;b>=0;--b){var A=f[b],I=o(A,"name");if(null!=I&&void 0!==I&&(I.value&&(I=I.value),0===I.indexOf(n,0))){d.insertBefore(c,A.nextSibling),y.onload();break}}}}}(),b={onAddMore:function(e,n){var i=t(e),u=i.cloneNode(!0),s=i.parentElement,c=s.childNodes,d=c.length,f=o(i,"name"),h=0;if(null!=f&&void 0!==f){f.value&&(f=f.value),null!=f&&0===f.indexOf(n,0)?(h=f.substring(n.length),h=parseInt(h)):h=0;for(var v=r("input",u),p=0;p<v.length;++p){var g=v[p],m=document.createElement("input");l(m,"type",o(g,"type")),l(m,"name",o(g,"name")),l(m,"placeholder",o(g,"placeholder")),u.replaceChild(m,g)}l(u,"name",n+(h+1))}for(a(i,"id"),p=d-1;p>=0;--p){var y=c[p],b=o(y,"name");if(null!=b&&void 0!==b&&(b.value&&(b=b.value),0===b.indexOf(n,0))){s.insertBefore(u,y.nextSibling);break}}}},w=function(){function a(e,n,o,a){var l=n.indexOf("<title>"),i=n.indexOf("</title>");f.updateCurrent(80),f.reDisplay();var u=n.indexOf('<div id="container">'),s=n.lastIndexOf("</div>");if(-1!==u&&-1!==s){if(-1!==l&&-1!==i){var c=n.substr(l+"<title>".length,i-(l+"<title>".length)),h=r("title");h.length&&h.length>0&&(h[0].innerHTML=c)}f.updateCurrent(84),f.reDisplay(),void 0!==a&&a(),f.updateCurrent(86),f.reDisplay();var v=n.substr(u+'<div id="container">'.length,s-(u+'<div id="container">'.length)),p=t("container"),g=document.documentElement;f.updateCurrent(90),f.reDisplay(),p.innerHTML=v,g.pageYOffset&&(g.pageYOffset=0),g.scrollTop&&(g.scrollTop=0),window.scrollTo&&window.scrollTo(0,0),f.updateCurrent(96),f.reDisplay(),o.responseURL&&null!=o.responseURL&&o.responseURL.length>0&&(e=o.responseURL),window.history.pushState?window.history.pushState({path:e},"",e):History.pushState&&History.pushState(null,null,e),f.updateCurrent(98),f.reDisplay(),d.reOnload(),d.reInvoke()}}function i(){if(!window.history.pushState&&!History.pushState&&null!=L){var n=r("head");if(n.length>0){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=L,n[0].appendChild(t)}e(window,s,function(e){if(116!=(e.which||e.keyCode)&&82!=(e.which||e.keyCode))return!0;var n=window.location.href,t=n.indexOf("#");return-1!==t&&(n=E+"/"+n.substr(t+1)),window.location.href=n,e.preventDefault(),!1},!0),L=null}}function v(e){if(e.indexOf&&-1===e.indexOf(E)){var n=e.indexOf("http://"),t=e.indexOf("https://");if(-1===n&&-1===t)e=E+"/"+e;else{var r="http://".length;0===t&&(r="https://".length);var o=e.indexOf("/",r);-1!==o&&(e=e.substr(o+1)),e=E+"/"+e}}return e}function p(e){f.updateCount(0),f.updateCurrent(20),f.updateTime(20)}function g(e){f.updateCurrent(100),f.reDisplay()}function m(e){console.log("Error"),console.log(e)}function y(e,n){f.reDisplay()}function b(e,n){if(0==e.lengthComputable)f.updateCurrent(80),f.updateTime(1);else{var t=e.loaded/e.total*60+20;t>f.getCurrent()&&f.updateCurrent(t),f.updateTime(f.getTime()-3)}f.reDisplay()}function k(e){if(this.href){var t=v(this.href);return h.open({url:t,before:p,error:m,loadstart:y,progress:b,end:function(e){w.reInitLoadTagA(),g(e)},success:function(e,r){a(t,e,r,function(){for(var e=0;e<T.length;++e)n(T[e],u,k)})}}),!1}}function x(){O=this}function C(){var e=o(this,"action");return null!=e&&(e=v(e)),h.open({url:e,method:"POST",dataFormElement:this,submitElement:O,before:p,error:m,loadstart:y,progress:b,uploadProgress:b,end:function(e){w.reInitLoadTagForm(),g(e)},success:function(t,r){a(e,t,r,function(){for(e=0;e<A.length;++e)n(A[e],u,x);for(var e=0;e<N.length;++e)n(N[e],c,C)})}}),!1}var E=null,L=null,O=null,T=[],N=[],A=[];return{init:function(e,n){E=e,L=n,i()},reInitLoadTagA:function(){T=r("a");for(var n=0;n<T.length;++n){var t=T[n];t.className&&-1!==t.className.indexOf("not-autoload")||(l(t,"onclick","return false"),null!=t&&e(t,u,k,!0))}},reInitLoadTagForm:function(){N=r("form"),A=[];var n=r("input"),t=r("button");if(n.length&&n.length>0)for(a=0;a<n.length;++a){var o=n[a];o.type&&"submit"===o.type.toLowerCase()&&(e(o,u,x,!0),A.push&&A.push(o))}if(t.length&&t.length>0)for(a=0;a<t.length;++a)e(t[a],u,x,!0),A.push&&A.push(t[a]);for(var a=0;a<N.length;++a){var i=N[a];i.className&&-1!==i.className.indexOf("not-autoload")||(l(i,"onsubmit","return false"),null!=i&&e(i,c,C,!0))}}}}();return{Ajax:h,OnLoad:d,ProgressBarBody:f,AutoFocusInputLast:v,ButtonSaveOnJs:p,CheckboxCheckAll:g,ChmodInput:m,CustomInputFile:y,CustomInputUrl:b,LoadAjax:w}}();Main.OnLoad&&Main.OnLoad.run();